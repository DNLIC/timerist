<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <title>Clock - Timerist | Digital Clock Display</title>
    <meta name="description" content="Simple and accurate digital clock displaying the current time in 12-hour format with AM/PM. Customize colors and title to match your preferences.">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --background: 245 247 250;
            --foreground: 51 51 51;
            --card: 255 255 255;
            --card-foreground: 51 51 51;
            --primary: 74 144 226;
            --primary-foreground: 255 255 255;
            --secondary: 80 200 120;
            --secondary-foreground: 255 255 255;
            --muted: 102 102 102;
            --muted-foreground: 153 153 153;
            --accent: 225 232 237;
            --accent-foreground: 51 51 51;
            --destructive: 231 76 60;
            --destructive-foreground: 255 255 255;
            --border: 225 232 237;
            --input: 225 232 237;
            --ring: 74 144 226;
            --radius: 0.5rem;
        }
        
        [data-theme="style1"] {
            --background: 0 0 0;
            --foreground: 255 255 255;
            --card: 26 26 26;
            --card-foreground: 255 255 255;
            --primary: 74 144 226;
            --primary-foreground: 255 255 255;
            --secondary: 80 200 120;
            --secondary-foreground: 255 255 255;
            --muted: 204 204 204;
            --muted-foreground: 153 153 153;
            --accent: 51 51 51;
            --accent-foreground: 255 255 255;
            --destructive: 231 76 60;
            --destructive-foreground: 255 255 255;
            --border: 51 51 51;
            --input: 51 51 51;
            --ring: 74 144 226;
        }
        
        body {
            background: rgb(var(--background));
            color: rgb(var(--foreground));
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            box-sizing: border-box;
        }
        
        * {
            box-sizing: border-box;
        }
        
        .container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            width: 100%;
            max-width: 1200px;
            padding: 1rem;
            padding-bottom: env(safe-area-inset-bottom, 1rem);
            margin: 0 auto;
            overflow-x: hidden;
            position: relative;
        }
        
        .timer-container {
            max-width: 1000px;
            margin: 0 auto;
            overflow-x: hidden;
            margin-top: clamp(4rem, 6vw, 5rem);
            width: 100%;
        }
        
        /* iPad vertical (portrait) - position timer below header */
        @media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
            .timer-container {
                margin-top: clamp(3.5rem, 5vw, 4.5rem);
            }
        }
        
        /* iPad horizontal (landscape) - position timer below header */
        @media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
            .timer-container {
                margin-top: clamp(4rem, 6vw, 5rem);
            }
        }
        
        /* Desktop - position timer below header */
        @media (min-width: 1025px) {
            .timer-container {
                margin-top: clamp(3.5rem, 5vw, 4.5rem);
            }
        }
        
        .bg-card { background-color: rgb(var(--card)); }
        .text-foreground { color: rgb(var(--foreground)); }
        .text-muted-foreground { color: rgb(var(--muted-foreground)); }
        .bg-primary { background-color: rgb(var(--primary)); }
        .text-primary-foreground { color: rgb(var(--primary-foreground)); }
        .bg-secondary { background-color: rgb(var(--secondary)); }
        .text-secondary-foreground { color: rgb(var(--secondary-foreground)); }
        .bg-destructive { background-color: rgb(var(--destructive)); }
        .text-destructive-foreground { color: rgb(var(--destructive-foreground)); }
        .border-border { border-color: rgb(var(--border)); }
        .hover\:bg-primary\/90:hover { background-color: rgba(var(--primary), 0.9); }
        .hover\:bg-secondary\/90:hover { background-color: rgba(var(--secondary), 0.9); }
        
        .timer-display-large {
            font-size: 3rem;
            font-weight: 700;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-variant-numeric: tabular-nums;
            line-height: 1;
            color: rgb(var(--primary));
            transition: color 0.3s ease;
            margin-bottom: 0;
            word-break: keep-all;
            overflow-wrap: normal;
            letter-spacing: -0.02em; /* tracking-tight */
        }
        
        @media (min-width: 390px) {
            .timer-display-large {
                font-size: 3.5rem;
            }
        }
        
        @media (min-width: 428px) {
            .timer-display-large {
                font-size: 4rem;
            }
        }
        
        @media (min-width: 768px) {
            .timer-display-large {
                font-size: 8rem;
                letter-spacing: 0;
            }
        }
        
        .timer-display-block {
            padding: 1rem;
            overflow: hidden;
            box-sizing: border-box;
        }
        
        @media (min-width: 640px) {
            .timer-display-block {
                padding: 1.5rem;
            }
        }
        
        @media (min-width: 768px) {
            .timer-display-block {
                padding: 1.5rem;
            }
        }
        
        /* Ensure timer display fits on mobile screens */
        @media (max-width: 767px) {
            .timer-display-block {
                padding-left: 0.75rem;
                padding-right: 0.75rem;
            }
            
            .timer-display-large {
                transform: scale(0.95);
                transform-origin: center;
            }
        }
        
        @media (max-width: 428px) {
            .timer-display-large {
                transform: scale(0.9);
            }
        }
        
        @media (max-width: 390px) {
            .timer-display-large {
                transform: scale(0.85);
            }
        }
        
        .control-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
            border: none;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            white-space: nowrap;
            flex-shrink: 1;
        }
        
        @media (max-width: 390px) {
            .control-btn {
                padding: 0.4rem 0.75rem;
                font-size: 0.75rem;
            }
        }
        
        .control-buttons-container {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            align-items: center;
            flex-wrap: nowrap;
        }
        
        @media (min-width: 390px) {
            .control-buttons-container {
                gap: 0.75rem;
            }
        }
        
        @media (min-width: 640px) {
            .control-buttons-container {
                gap: 1rem;
            }
        }
        
        .control-btn.btn-primary {
            background-color: rgb(var(--primary));
            color: rgb(var(--primary-foreground));
        }
        
        .control-btn.btn-primary:hover:not(:disabled) {
            background-color: rgba(var(--primary), 0.9);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        /* Start button hover - dark gray */
        #startBtn:hover:not(:disabled) {
            background-color: rgb(100, 100, 100);
            color: rgb(255, 255, 255);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        /* Dark mode Start button hover - lighter gray */
        [data-theme="style1"] #startBtn:hover:not(:disabled) {
            background-color: rgb(150, 150, 150);
            color: rgb(0, 0, 0);
        }
        
        /* Pause button hover - dark gray (when not paused) */
        #pauseBtn:hover:not(:disabled):not(.paused) {
            background-color: rgb(100, 100, 100);
            color: rgb(255, 255, 255);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        /* Dark mode Pause button hover - lighter gray (when not paused) */
        [data-theme="style1"] #pauseBtn:hover:not(:disabled):not(.paused) {
            background-color: rgb(150, 150, 150);
            color: rgb(0, 0, 0);
        }
        
        /* Paused state - dark gray background with white text */
        .control-btn.btn-primary.paused,
        .control-btn.btn-primary.paused:hover,
        .control-btn.btn-primary.paused:active,
        .control-btn.btn-primary.paused:focus {
            background-color: rgb(100, 100, 100) !important;
            color: rgb(255, 255, 255) !important;
        }
        
        /* Dark mode paused state - lighter gray */
        [data-theme="style1"] .control-btn.btn-primary.paused,
        [data-theme="style1"] .control-btn.btn-primary.paused:hover,
        [data-theme="style1"] .control-btn.btn-primary.paused:active,
        [data-theme="style1"] .control-btn.btn-primary.paused:focus {
            background-color: rgb(150, 150, 150) !important;
            color: rgb(0, 0, 0) !important;
        }
        
        .control-btn.btn-secondary {
            background-color: rgb(var(--secondary));
            color: rgb(var(--secondary-foreground));
        }
        
        .control-btn.btn-secondary:hover:not(:disabled) {
            background-color: rgba(var(--secondary), 0.9);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        .control-btn.btn-destructive {
            background-color: rgb(var(--destructive));
            color: rgb(var(--destructive-foreground));
        }
        
        .control-btn.btn-destructive:hover:not(:disabled) {
            background-color: rgba(var(--destructive), 0.9);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        /* Reset button hover - dark gray */
        #resetBtn:hover:not(:disabled) {
            background-color: rgb(100, 100, 100);
            color: rgb(255, 255, 255);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        /* Dark mode Reset button hover - lighter gray */
        [data-theme="style1"] #resetBtn:hover:not(:disabled) {
            background-color: rgb(150, 150, 150);
            color: rgb(0, 0, 0);
        }
        
        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .hamburger-menu {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgb(var(--foreground));
            font-size: 1.5rem;
            transition: opacity 0.2s;
            width: 44px;
            height: 44px;
            border-radius: var(--radius);
            flex-shrink: 0;
        }
        
        .hamburger-menu:hover {
            opacity: 0.7;
        }
        
        /* Bottom sheet (shadcn design pass) â€“ slides up from bottom */
        .sheet-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 1001;
        }
        
        .sheet-overlay.open {
            opacity: 1;
            visibility: visible;
        }
        
        .bottom-sheet {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            max-height: 85vh;
            background: rgb(var(--card));
            border-top-left-radius: 1rem;
            border-top-right-radius: 1rem;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
            z-index: 1002;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .bottom-sheet.open {
            transform: translateY(0);
        }
        
        .sheet-grabber {
            flex-shrink: 0;
            width: 40px;
            height: 4px;
            margin: 0.75rem auto 0;
            background: rgb(var(--muted-foreground));
            border-radius: 9999px;
            opacity: 0.6;
        }
        
        .sheet-header {
            flex-shrink: 0;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid rgb(var(--border));
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .sheet-header-actions {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            flex-shrink: 0;
        }
        
        .header-clear-btn {
            min-width: 48px;
            min-height: 48px;
            padding: 0.5rem;
            border: none;
            border-radius: 0.75rem;
            background: transparent;
            color: rgb(var(--destructive));
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .header-clear-btn:hover {
            background: rgba(var(--destructive), 0.15);
        }
        
        .header-clear-btn:focus-visible {
            outline: 2px solid rgb(var(--ring));
            outline-offset: 2px;
        }
        
        .header-clear-btn svg {
            width: 22px;
            height: 22px;
        }
        
        .sheet-content {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            padding-bottom: calc(1.5rem + env(safe-area-inset-bottom, 0px));
        }
        
        .sheet-section {
            margin-bottom: 2rem;
        }
        
        .sheet-section h3 {
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: rgb(var(--muted-foreground));
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .sheet-section p {
            color: rgb(var(--muted-foreground));
            line-height: 1.6;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
        }
        
        .btn-clear-all-settings {
            width: 100%;
            min-height: 52px;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            border: 2px solid rgb(var(--destructive));
            background: rgb(var(--destructive));
            color: rgb(var(--destructive-foreground));
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        .btn-clear-all-settings:hover {
            opacity: 0.9;
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: rgb(var(--muted-foreground));
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .shadcn-input,
        .shadcn-textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid rgb(var(--input));
            border-radius: 0.75rem;
            background: rgb(var(--background));
            color: rgb(var(--foreground));
            font-size: 16px;
            min-height: 52px;
            font-family: inherit;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        .shadcn-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .shadcn-input:focus,
        .shadcn-textarea:focus {
            outline: none;
            border-color: rgb(var(--ring));
            box-shadow: 0 0 0 3px rgba(var(--ring), 0.2);
        }
        
        textarea.shadcn-textarea {
            text-align: left;
            font-weight: 400;
            line-height: 1.5;
        }
        
        /* Color Picker Styles - shadcn/ui compliant */
        .color-picker-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: rgb(var(--foreground));
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        /* Tabs Styles - shadcn/ui compliant */
        .tabs {
            width: 100%;
        }
        
        .tabs-list {
            display: inline-flex;
            height: 2.5rem;
            align-items: center;
            justify-content: center;
            border-radius: 0.375rem;
            background-color: rgb(var(--muted));
            padding: 0.25rem;
            color: rgb(var(--muted-foreground));
            margin-bottom: 1rem;
        }
        
        .tabs-trigger {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            border-radius: 0.25rem;
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
            border: none;
            background: transparent;
            color: rgb(var(--muted-foreground));
            outline: none;
            flex: 1;
        }
        
        .tabs-trigger:hover {
            color: rgb(var(--foreground));
        }
        
        .tabs-trigger[data-state="active"] {
            background-color: rgb(var(--background));
            color: rgb(var(--foreground));
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        
        .tabs-trigger:focus-visible {
            outline: 2px solid rgb(var(--ring));
            outline-offset: 2px;
        }
        
        .tabs-content {
            margin-top: 0.5rem;
            outline: none;
        }
        
        .tabs-content[data-state="inactive"] {
            display: none;
        }
        
        .tabs-content[data-state="active"] {
            display: block;
        }
        
        /* Responsive grid for color picker sections */
        @media (max-width: 640px) {
            .grid.grid-cols-2 {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .tabs-list {
                height: auto;
                flex-wrap: wrap;
            }
            
            .tabs-trigger {
                flex: 1 1 auto;
                min-width: 50%;
            }
        }
        
        .color-swatch-btn {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 9999px;
            border: 1px solid rgb(209, 213, 219);
            cursor: pointer;
            transition: all 0.2s;
            outline: none;
        }
        
        .color-swatch-btn:hover {
            box-shadow: 0 0 0 2px rgba(var(--primary), 0.5);
        }
        
        .color-swatch-btn:focus-visible {
            outline: 2px solid rgb(var(--ring));
            outline-offset: 2px;
        }
        
        .color-swatch-btn.selected {
            border-color: rgb(var(--primary));
            border-width: 2px;
            box-shadow: 0 0 0 2px rgba(var(--primary), 0.2);
        }
        
        .color-input {
            outline: none;
        }
        
        .color-input:hover {
            border-color: rgba(var(--primary), 0.8) !important;
        }
        
        .color-input:focus {
            border-color: rgb(var(--primary)) !important;
            box-shadow: 0 0 0 2px rgba(var(--primary), 0.2);
        }
        
        .drawer-close {
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: rgb(var(--foreground));
            padding: 0.25rem;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius);
        }
        
        .drawer-close:hover {
            opacity: 0.7;
        }
        
        .header-top {
            position: absolute;
            top: clamp(1rem, 3vw, 2rem);
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 clamp(1rem, 3vw, 2rem);
            z-index: 10;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            gap: 0.5rem;
            min-width: 0;
        }
        
        .header-top > div:first-child {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-width: 0;
            flex-shrink: 1;
            overflow: hidden;
        }
        
        /* iPhone 13 mini and similar small screens - make header more compact */
        @media (max-width: 390px) {
            .header-top {
                padding: 0 0.75rem;
            }
            
            .header-top > div:first-child {
                gap: 0.5rem;
            }
            
            /* Hide separator and "timerist.com" text on very small screens */
            .header-top .separator,
            .header-top > div:first-child > a:nth-of-type(2) {
                display: none;
            }
            
            /* Make "Clock" text smaller */
            .header-top > div:first-child > span:last-of-type {
                font-size: 0.875rem !important;
            }
            
            /* Ensure logo doesn't shrink too much */
            #timerist-logo {
                width: 36px !important;
                height: 36px !important;
                flex-shrink: 0;
            }
        }
        
        /* Slightly larger screens (iPhone 13, 14, etc.) - show more but keep compact */
        @media (min-width: 391px) and (max-width: 428px) {
            .header-top {
                padding: 0 1rem;
            }
            
            /* Hide separator but keep timerist.com text */
            .header-top .separator {
                display: none;
            }
            
            /* Make text smaller */
            .header-top > div:first-child > span {
                font-size: 0.875rem !important;
            }
        }
        
        @media (min-width: 640px) {
            .container {
                padding: 2rem;
            }
        }
        
        @media (min-width: 768px) {
            .container {
                padding: 2rem 3rem;
            }
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-shrink: 0;
            min-width: fit-content;
        }
        
        /* Ensure both buttons are always visible on small screens */
        @media (max-width: 428px) {
            .header-actions {
                gap: 0.375rem;
            }
            
            .header-actions .mode-toggle-btn,
            .header-actions .hamburger-menu {
                width: 40px;
                height: 40px;
                padding: 0.375rem;
                font-size: 1.25rem;
            }
        }
        
        .header-top .mode-toggle-btn {
            position: relative;
            top: auto;
            right: auto;
            width: 44px;
            height: 44px;
            flex-shrink: 0;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgb(var(--foreground));
            font-size: 1.5rem;
            transition: opacity 0.2s;
            border-radius: var(--radius);
            min-width: 44px;
        }
        
        .header-top .mode-toggle-btn:hover,
        .header-top .mode-toggle-btn:active {
            opacity: 0.7;
            background-color: rgba(var(--accent), 0.5);
        }
        
        .header-top .mode-toggle-btn:focus {
            outline: 2px solid rgb(var(--ring));
            outline-offset: 2px;
        }
        
        .header-top .mode-toggle-btn {
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
            -webkit-user-select: none;
        }
        
        #timerist-logo {
            display: block;
            width: 40px;
            height: 40px;
            color: #0a0a0a;
        }
        
        .header-top a {
            transition: opacity 0.2s ease;
        }
        
        .header-top a:hover {
            opacity: 0.7;
        }
        
        #timerist-logo circle,
        #timerist-logo line {
            stroke: #0a0a0a;
            stroke-width: 2.5;
        }
        
        [data-theme="style1"] #timerist-logo {
            color: #fafafa;
        }
        
        [data-theme="style1"] #timerist-logo circle,
        [data-theme="style1"] #timerist-logo line {
            stroke: #fafafa;
        }
        
        [data-theme="style1"] #timerist-logo .logo-circle,
        [data-theme="style1"] #timerist-logo .logo-line {
            stroke: #fafafa !important;
        }
        
        /* Clock Title Styles */
        .clock-title {
            font-size: clamp(1.25rem, 3vw, 1.75rem);
            font-weight: 600;
            color: rgb(var(--foreground));
            text-align: center;
            margin: 0;
            padding: 1rem;
            transition: color 0.3s ease;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        /* Workout/Instructions Box Styles */
        .workout-instructions {
            font-size: clamp(1.125rem, 2.75vw, 1.5rem);
            color: rgb(var(--foreground));
            text-align: center;
            margin: 0;
            padding: 1.5rem;
            line-height: 1.6;
            transition: color 0.3s ease;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        #workoutInstructionsBox {
            display: none; /* Hidden by default, shown when content exists via JavaScript */
        }
        
        /* Timer/clock display block â€“ tap to open settings (shadcn design pass) */
        .tap-to-open {
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
        }
        .timer-display-block.tap-to-open {
            cursor: pointer;
        }
    </style>
</head>
<body class="font-sans">
    <div class="container">
        <div class="header-top">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <a href="index.html" style="display: flex; align-items: center; text-decoration: none; cursor: pointer;">
                    <svg
                        width="40"
                        height="40"
                        viewBox="0 0 40 40"
                        xmlns="http://www.w3.org/2000/svg"
                        id="timerist-logo"
                    >
                        <circle cx="20" cy="20" r="15" fill="none" stroke="#0a0a0a" stroke-width="2.5" class="logo-circle"/>
                        <line x1="20" y1="20" x2="20" y2="8" stroke="#0a0a0a" stroke-width="2.5" class="logo-line"/>
                        <line x1="20" y1="20" x2="30" y2="20" stroke="#0a0a0a" stroke-width="2.5" class="logo-line"/>
                    </svg>
                </a>
                <a href="index.html" style="font-size: clamp(1rem, 3vw, 1.5rem); font-weight: 600; color: rgb(var(--foreground)); text-decoration: none; cursor: pointer;">timerist.com</a>
                <span class="separator" style="color: rgb(var(--muted-foreground));">|</span>
                <span style="font-size: clamp(1rem, 3vw, 1.5rem); font-weight: 600; color: rgb(var(--foreground));">Clock</span>
            </div>
            
            <div class="header-actions">
                <button class="mode-toggle-btn mode-toggle" id="themeToggleBtn" aria-label="Toggle dark mode">
                    <span id="theme-icon">ðŸŒ™</span>
                </button>
                <button type="button" class="hamburger-menu" id="menuBtn" aria-label="Open settings">â˜°</button>
            </div>
        </div>
        
        <div class="timer-container" style="display: flex; flex-direction: column; gap: 1rem;">
            <!-- Title Box (tap to open settings) -->
            <div class="bg-card border border-border rounded-xl shadow-lg text-center tap-to-open" id="clockTitleBlock" role="button" tabindex="0" aria-label="Open clock settings">
                <h1 class="clock-title" id="clock-title">Clock</h1>
            </div>
            
            <!-- Clock Display Box (tap to open settings) -->
            <div class="timer-display-block tap-to-open bg-card border border-border rounded-xl shadow-lg text-center" id="timerDisplayBlock" role="button" tabindex="0" aria-label="Open clock settings">
                <div class="timer-display-large" id="timer-display">00:00:00 AM</div>
            </div>
            
            <!-- Workout/Instructions Box -->
            <div class="bg-card border border-border rounded-xl shadow-lg text-center" id="workoutInstructionsBox">
                <div class="workout-instructions" id="workout-instructions"></div>
            </div>
        </div>
    </div>
    
    <!-- Sheet Overlay -->
    <div class="sheet-overlay" id="drawerOverlay" aria-hidden="true"></div>
    
    <!-- Settings Bottom Sheet -->
    <div class="bottom-sheet" id="settingsDrawer" role="dialog" aria-label="Clock setup">
        <div class="sheet-grabber" aria-hidden="true"></div>
        <div class="sheet-header">
            <h2 class="text-base font-semibold uppercase tracking-wide text-[rgb(var(--foreground))]">Settings</h2>
            <div class="sheet-header-actions">
                <button type="button" class="header-clear-btn" id="headerClearBtn" aria-label="Clear settings to defaults" title="Clear settings to defaults">
                    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
                </button>
                <button type="button" class="drawer-close" id="drawerCloseBtn" aria-label="Close">Ã—</button>
            </div>
        </div>
        <div class="sheet-content">
            <!-- About This Clock -->
            <div class="sheet-section">
                <h3>About This Clock</h3>
                <p>
                    Simple and accurate digital clock displaying the current local time in 12-hour format with AM/PM designation. 
                    The clock updates automatically every second and runs continuously without any user intervention. Perfect for 
                    keeping track of the current time at a glance.
                </p>
                <p style="margin-top: 0.75rem;">
                    <strong>Keywords:</strong> digital clock, clock display, time display, 12-hour clock, AM/PM clock, clock app, time app.
                </p>
            </div>
            
            <!-- Clock Setup -->
            <div class="sheet-section">
                <h3>Clock Setup</h3>
                
                <div class="input-group">
                    <label for="clock-title-input">Clock Title</label>
                    <p class="text-xs text-[rgb(var(--muted-foreground))] mt-1 mb-2">Customize the title displayed above the clock (default: "Clock").</p>
                    <input 
                        type="text" 
                        id="clock-title-input" 
                        class="shadcn-input"
                        placeholder="Clock"
                        maxlength="50"
                        aria-label="Clock title"
                    />
                </div>
                
                <div class="input-group">
                    <label for="workout-instructions-input">Workout / Instructions</label>
                    <p class="text-xs text-[rgb(var(--muted-foreground))] mt-1 mb-2">Add workout details, instructions, or notes below the clock.</p>
                    <textarea 
                        id="workout-instructions-input" 
                        class="shadcn-textarea"
                        placeholder="Enter workout details or instructions..."
                        rows="4"
                        maxlength="500"
                        aria-label="Workout instructions"
                    ></textarea>
                </div>
                
                <!-- Clock Text Color -->
                <div class="sheet-section">
                    <h3>Clock Text Color</h3>
                    
                    <!-- Tabs Component -->
                    <div class="tabs" data-tabs="color-picker-tabs">
                        <div class="tabs-list" role="tablist">
                            <button 
                                class="tabs-trigger" 
                                role="tab"
                                data-tab="dark"
                                data-state="active"
                                aria-selected="true"
                                aria-controls="dark-tab-content"
                                id="dark-tab-trigger"
                            >
                                Night Mode
                            </button>
                            <button 
                                class="tabs-trigger" 
                                role="tab"
                                data-tab="light"
                                data-state="inactive"
                                aria-selected="false"
                                aria-controls="light-tab-content"
                                id="light-tab-trigger"
                            >
                                Light Mode
                            </button>
                        </div>
                        
                        <!-- Dark Mode Tab Content -->
                        <div 
                            class="tabs-content" 
                            id="dark-tab-content"
                            role="tabpanel"
                            data-state="active"
                            aria-labelledby="dark-tab-trigger"
                        >
                            <!-- Dark Mode Default Button -->
                            <button 
                                id="defaultDarkBtn" 
                                type="button"
                                class="w-full mb-3 px-3 py-2 rounded-md text-xs font-medium cursor-pointer transition-colors text-white"
                                style="background-color: #e74c3c; border: 1px solid #e74c3c;"
                            >
                                Return to Default
                            </button>
                            
                            <!-- Color Swatches Grid - Bright colors visible on black -->
                            <div class="grid grid-cols-3 gap-3 mb-4">
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#e74c3c" data-mode="dark" aria-label="Default Red" title="Default Red" tabindex="0" type="button" style="background-color: #e74c3c;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#ffffff" data-mode="dark" aria-label="White" title="White" tabindex="0" type="button" style="background-color: #ffffff;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#ef4444" data-mode="dark" aria-label="Bright Red" title="Bright Red" tabindex="0" type="button" style="background-color: #ef4444;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#3b82f6" data-mode="dark" aria-label="Bright Blue" title="Bright Blue" tabindex="0" type="button" style="background-color: #3b82f6;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#22c55e" data-mode="dark" aria-label="Bright Green" title="Bright Green" tabindex="0" type="button" style="background-color: #22c55e;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#eab308" data-mode="dark" aria-label="Yellow" title="Yellow" tabindex="0" type="button" style="background-color: #eab308;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#f97316" data-mode="dark" aria-label="Orange" title="Orange" tabindex="0" type="button" style="background-color: #f97316;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#ec4899" data-mode="dark" aria-label="Pink" title="Pink" tabindex="0" type="button" style="background-color: #ec4899;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#06b6d4" data-mode="dark" aria-label="Cyan" title="Cyan" tabindex="0" type="button" style="background-color: #06b6d4;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#10b981" data-mode="dark" aria-label="Emerald" title="Emerald" tabindex="0" type="button" style="background-color: #10b981;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#8b5cf6" data-mode="dark" aria-label="Violet" title="Violet" tabindex="0" type="button" style="background-color: #8b5cf6;"></button>
                                <button class="color-swatch-btn dark-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#f43f5e" data-mode="dark" aria-label="Rose" title="Rose" tabindex="0" type="button" style="background-color: #f43f5e;"></button>
                            </div>
                        </div>
                        
                        <!-- Light Mode Tab Content -->
                        <div 
                            class="tabs-content" 
                            id="light-tab-content"
                            role="tabpanel"
                            data-state="inactive"
                            aria-labelledby="light-tab-trigger"
                        >
                            <!-- Light Mode Default Button -->
                            <button 
                                id="defaultLightBtn" 
                                type="button"
                                class="w-full mb-3 px-3 py-2 rounded-md text-xs font-medium cursor-pointer transition-colors text-white"
                                style="background-color: #4a90e2; border: 1px solid #4a90e2;"
                            >
                                Return to Default
                            </button>
                            
                            <!-- Color Swatches Grid - Dark colors visible on white -->
                            <div class="grid grid-cols-3 gap-3 mb-4">
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#4a90e2" data-mode="light" aria-label="Default Blue" title="Default Blue" tabindex="0" type="button" style="background-color: #4a90e2;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#000000" data-mode="light" aria-label="Black" title="Black" tabindex="0" type="button" style="background-color: #000000;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#0f172a" data-mode="light" aria-label="Slate 900" title="Slate 900" tabindex="0" type="button" style="background-color: #0f172a;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#1e293b" data-mode="light" aria-label="Slate 800" title="Slate 800" tabindex="0" type="button" style="background-color: #1e293b;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#334155" data-mode="light" aria-label="Slate 700" title="Slate 700" tabindex="0" type="button" style="background-color: #334155;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#475569" data-mode="light" aria-label="Slate 600" title="Slate 600" tabindex="0" type="button" style="background-color: #475569;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#64748b" data-mode="light" aria-label="Slate 500" title="Slate 500" tabindex="0" type="button" style="background-color: #64748b;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#dc2626" data-mode="light" aria-label="Dark Red" title="Dark Red" tabindex="0" type="button" style="background-color: #dc2626;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#1e40af" data-mode="light" aria-label="Dark Blue" title="Dark Blue" tabindex="0" type="button" style="background-color: #1e40af;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#166534" data-mode="light" aria-label="Dark Green" title="Dark Green" tabindex="0" type="button" style="background-color: #166534;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#7c2d12" data-mode="light" aria-label="Dark Orange" title="Dark Orange" tabindex="0" type="button" style="background-color: #7c2d12;"></button>
                                <button class="color-swatch-btn light-mode-swatch w-10 h-10 rounded-full border border-gray-300 hover:ring-2 hover:ring-primary/50 transition" data-color="#6b21a8" data-mode="light" aria-label="Dark Purple" title="Dark Purple" tabindex="0" type="button" style="background-color: #6b21a8;"></button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Native Color Input -->
                    <div class="mb-4">
                        <input 
                            type="color" 
                            id="timer-text-color-picker" 
                            class="color-input w-12 h-12 rounded-md cursor-pointer transition-colors"
                            style="border: 1px solid rgb(var(--input)); background-color: rgb(var(--background));"
                            aria-label="Custom clock text color"
                        />
                    </div>
                </div>
            </div>
            
            <div class="sheet-section">
                <button type="button" id="clearAllSettingsBtn" class="btn-clear-all-settings" aria-label="Clear all settings">Clear All Settings</button>
            </div>
            
            <!-- General Info -->
            <div class="sheet-section">
                <h3>General Info</h3>
                <p><strong>Version:</strong> v0.23 Â· <span id="releaseDate">2024-01-15</span></p>
            </div>
        </div>
    </div>
    
    <script>
        (function() {
            var themeKey = 'timerist-theme';
            var darkThemeValue = 'style1';
            function getInitialTheme() {
                var saved = localStorage.getItem(themeKey);
                if (saved) return saved;
                return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            }
            function isDarkMode() {
                return document.documentElement.getAttribute('data-theme') === darkThemeValue;
            }
            function applyTheme(theme) {
                var root = document.documentElement;
                if (theme === 'dark') {
                    root.setAttribute('data-theme', darkThemeValue);
                } else {
                    root.removeAttribute('data-theme');
                }
                localStorage.setItem(themeKey, theme);
            }
            applyTheme(getInitialTheme());
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
                if (!localStorage.getItem(themeKey)) applyTheme(e.matches ? 'dark' : 'light');
            });
            window.toggleTheme = function() {
                applyTheme(isDarkMode() ? 'light' : 'dark');
            };
        })();
    </script>
    <script>
        // Clock Logic
        let clockInterval = null;
        
        const display = document.getElementById('timer-display');
        const clockTitle = document.getElementById('clock-title');
        const titleInput = document.getElementById('clock-title-input');
        const workoutInstructions = document.getElementById('workout-instructions');
        const workoutInstructionsInput = document.getElementById('workout-instructions-input');
        const workoutInstructionsBox = document.getElementById('workoutInstructionsBox');
        
        // Format time in 12-hour format with AM/PM
        function formatTime(date) {
            let hours = date.getHours();
            const minutes = date.getMinutes();
            const seconds = date.getSeconds();
            const ampm = hours >= 12 ? 'PM' : 'AM';
            
            // Convert to 12-hour format
            // Handle midnight (00:00) -> 12:00 AM
            // Handle noon (12:00) -> 12:00 PM
            if (hours === 0) {
                hours = 12; // Midnight
            } else if (hours > 12) {
                hours = hours - 12; // Afternoon hours
            }
            // hours === 12 stays as 12 (noon)
            
            // Pad with zeros
            const hoursStr = String(hours).padStart(2, '0');
            const minutesStr = String(minutes).padStart(2, '0');
            const secondsStr = String(seconds).padStart(2, '0');
            
            return `${hoursStr}:${minutesStr}:${secondsStr} ${ampm}`;
        }
        
        // Update clock display
        function updateClock() {
            const now = new Date();
            display.textContent = formatTime(now);
        }
        
        // Start the clock (auto-start on page load)
        function startClock() {
            // Update immediately
            updateClock();
            
            // Then update every second
            clockInterval = setInterval(updateClock, 1000);
        }
        
        // Initialize clock on page load
        startClock();
        
        // Set release date
        document.getElementById('releaseDate').textContent = new Date().toISOString().split('T')[0];
        
        // Title Management with localStorage
        const TITLE_STORAGE_KEY = 'clockTitle';
        const DEFAULT_TITLE = 'Clock';
        
        // Load saved title from localStorage
        function loadTitle() {
            const savedTitle = localStorage.getItem(TITLE_STORAGE_KEY);
            const title = savedTitle || DEFAULT_TITLE;
            clockTitle.textContent = title;
            if (titleInput) {
                titleInput.value = savedTitle || '';
            }
        }
        
        // Save title to localStorage
        function saveTitle(title) {
            if (title && title.trim()) {
                localStorage.setItem(TITLE_STORAGE_KEY, title.trim());
            } else {
                localStorage.removeItem(TITLE_STORAGE_KEY);
            }
        }
        
        // Update title display
        function updateTitle(title) {
            const displayTitle = title && title.trim() ? title.trim() : DEFAULT_TITLE;
            clockTitle.textContent = displayTitle;
        }
        
        // Handle title input changes
        if (titleInput) {
            // Load saved title on input focus
            titleInput.addEventListener('focus', function() {
                const savedTitle = localStorage.getItem(TITLE_STORAGE_KEY);
                this.value = savedTitle || '';
            });
            
            // Save title on input blur (when user finishes editing)
            titleInput.addEventListener('blur', function() {
                const newTitle = this.value.trim();
                saveTitle(newTitle);
                updateTitle(newTitle);
            });
            
            // Also save on Enter key
            titleInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    this.blur(); // Triggers blur event which saves
                }
            });
        }
        
        // Initialize title on page load
        loadTitle();
        
        // Workout/Instructions Management with localStorage
        const WORKOUT_INSTRUCTIONS_STORAGE_KEY = 'clockWorkoutInstructions';
        
        // Load saved workout/instructions from localStorage
        function loadWorkoutInstructions() {
            const savedInstructions = localStorage.getItem(WORKOUT_INSTRUCTIONS_STORAGE_KEY);
            const instructions = savedInstructions || '';
            workoutInstructions.textContent = instructions;
            
            // Hide the box if empty
            if (!instructions || !instructions.trim()) {
                workoutInstructionsBox.style.display = 'none';
            } else {
                workoutInstructionsBox.style.display = 'block';
            }
            
            if (workoutInstructionsInput) {
                workoutInstructionsInput.value = instructions;
            }
        }
        
        // Save workout/instructions to localStorage
        function saveWorkoutInstructions(text) {
            if (text && text.trim()) {
                localStorage.setItem(WORKOUT_INSTRUCTIONS_STORAGE_KEY, text.trim());
            } else {
                localStorage.removeItem(WORKOUT_INSTRUCTIONS_STORAGE_KEY);
            }
        }
        
        // Update workout/instructions display
        function updateWorkoutInstructions(text) {
            const displayText = text && text.trim() ? text.trim() : '';
            workoutInstructions.textContent = displayText;
            
            // Show/hide box based on content
            if (!displayText) {
                workoutInstructionsBox.style.display = 'none';
            } else {
                workoutInstructionsBox.style.display = 'block';
            }
        }
        
        // Handle workout/instructions input changes
        if (workoutInstructionsInput) {
            // Load saved instructions on input focus
            workoutInstructionsInput.addEventListener('focus', function() {
                const savedInstructions = localStorage.getItem(WORKOUT_INSTRUCTIONS_STORAGE_KEY);
                this.value = savedInstructions || '';
            });
            
            // Save instructions on input blur (when user finishes editing)
            workoutInstructionsInput.addEventListener('blur', function() {
                const newInstructions = this.value.trim();
                saveWorkoutInstructions(newInstructions);
                updateWorkoutInstructions(newInstructions);
            });
            
            // Also update on input (real-time preview)
            workoutInstructionsInput.addEventListener('input', function() {
                updateWorkoutInstructions(this.value);
            });
        }
        
        // Initialize workout/instructions on page load
        loadWorkoutInstructions();
        
        // Clock Text Color Picker with Mode-Specific Defaults
        const timerDisplay = document.getElementById('timer-display');
        const DARK_DEFAULT_KEY = 'timerTextColorDarkClock';
        const LIGHT_DEFAULT_KEY = 'timerTextColorLightClock';
        const DARK_DEFAULT = '#e74c3c';
        const LIGHT_DEFAULT = '#4a90e2';
        
        // Helper function to update theme icon (available across script blocks)
        function updateThemeIconHelper() {
            const icon = document.getElementById('theme-icon');
            if (!icon) return;
            const isDark = document.documentElement.getAttribute('data-theme') === 'style1';
            icon.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
        }
        
        // Expose globally for use in other script blocks
        window.updateThemeIconHelper = updateThemeIconHelper;
        
        // Get current mode default color
        function getCurrentModeDefault() {
            const isDark = document.documentElement.getAttribute('data-theme') === 'style1';
            const darkDefault = localStorage.getItem(DARK_DEFAULT_KEY) || DARK_DEFAULT;
            const lightDefault = localStorage.getItem(LIGHT_DEFAULT_KEY) || LIGHT_DEFAULT;
            return isDark ? darkDefault : lightDefault;
        }
        
        // Apply timer text color (only if current mode matches)
        function applyTextColor(color, mode) {
            if (!timerDisplay) return;
            const isDark = document.documentElement.getAttribute('data-theme') === 'style1';
            
            // Only apply if the mode matches
            if ((mode === 'dark' && isDark) || (mode === 'light' && !isDark)) {
                timerDisplay.style.color = color;
            }
        }
        
        // Save mode-specific default
        function saveModeDefault(color, mode) {
            if (mode === 'dark') {
                localStorage.setItem(DARK_DEFAULT_KEY, color);
            } else {
                localStorage.setItem(LIGHT_DEFAULT_KEY, color);
            }
        }
        
        // Reset to dark mode default (hardcoded default)
        function resetToDarkDefault() {
            // Reset to hardcoded default
            saveModeDefault(DARK_DEFAULT, 'dark');
            
            // If currently in dark mode, apply it
            if (document.documentElement.getAttribute('data-theme') === 'style1') {
                timerDisplay.style.color = DARK_DEFAULT;
            }
            
            // Update color input
            const colorInput = document.getElementById('timer-text-color-picker');
            if (colorInput) {
                colorInput.value = DARK_DEFAULT;
            }
            
            // Remove selected state from all swatches
            document.querySelectorAll('.color-swatch-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }
        
        // Reset to light mode default (hardcoded default)
        function resetToLightDefault() {
            // Reset to hardcoded default
            saveModeDefault(LIGHT_DEFAULT, 'light');
            
            // If currently in light mode, apply it
            if (document.documentElement.getAttribute('data-theme') !== 'style1') {
                timerDisplay.style.color = LIGHT_DEFAULT;
            }
            
            // Update color input
            const colorInput = document.getElementById('timer-text-color-picker');
            if (colorInput) {
                colorInput.value = LIGHT_DEFAULT;
            }
            
            // Remove selected state from all swatches
            document.querySelectorAll('.color-swatch-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }
        
        // Load saved timer text color on page load
        function loadTextColor() {
            const isDark = document.documentElement.getAttribute('data-theme') === 'style1';
            const darkDefault = localStorage.getItem(DARK_DEFAULT_KEY) || DARK_DEFAULT;
            const lightDefault = localStorage.getItem(LIGHT_DEFAULT_KEY) || LIGHT_DEFAULT;
            const currentDefault = isDark ? darkDefault : lightDefault;
            
            timerDisplay.style.color = currentDefault;
            
            // Update color input
            const colorInput = document.getElementById('timer-text-color-picker');
            if (colorInput) {
                colorInput.value = currentDefault;
            }
        }
        
        // Set tab state without switching theme (for drawer opening)
        function setTabState(tabName, switchTheme = true) {
            const darkTab = document.getElementById('dark-tab-trigger');
            const lightTab = document.getElementById('light-tab-trigger');
            const darkContent = document.getElementById('dark-tab-content');
            const lightContent = document.getElementById('light-tab-content');
            
            if (tabName === 'dark') {
                darkTab.setAttribute('data-state', 'active');
                darkTab.setAttribute('aria-selected', 'true');
                darkContent.setAttribute('data-state', 'active');
                
                lightTab.setAttribute('data-state', 'inactive');
                lightTab.setAttribute('aria-selected', 'false');
                lightContent.setAttribute('data-state', 'inactive');
                
                // Switch to dark mode only if switchTheme is true
                if (switchTheme && document.documentElement.getAttribute('data-theme') !== 'style1') {
                    if (window.toggleTheme) {
                        window.toggleTheme();
                    }
                    // Update theme icon after switching (wait for DOM to update)
                    setTimeout(() => {
                        updateThemeIconHelper();
                        if (window.updateLogoColors) {
                            window.updateLogoColors();
                        }
                    }, 100);
                }
            } else {
                lightTab.setAttribute('data-state', 'active');
                lightTab.setAttribute('aria-selected', 'true');
                lightContent.setAttribute('data-state', 'active');
                
                darkTab.setAttribute('data-state', 'inactive');
                darkTab.setAttribute('aria-selected', 'false');
                darkContent.setAttribute('data-state', 'inactive');
                
                // Switch to light mode only if switchTheme is true
                if (switchTheme && document.documentElement.getAttribute('data-theme') === 'style1') {
                    if (window.toggleTheme) {
                        window.toggleTheme();
                    }
                    // Update theme icon after switching (wait for DOM to update)
                    setTimeout(() => {
                        updateThemeIconHelper();
                        if (window.updateLogoColors) {
                            window.updateLogoColors();
                        }
                    }, 100);
                }
            }
            
            // Update timer color after mode switch
            if (switchTheme) {
                setTimeout(() => {
                    loadTextColor();
                }, 100);
            }
        }
        
        // Tab Switching Logic (switches theme)
        function switchTab(tabName) {
            setTabState(tabName, true);
        }
        
        // Handle tab clicks
        const darkTab = document.getElementById('dark-tab-trigger');
        const lightTab = document.getElementById('light-tab-trigger');
        
        if (darkTab) {
            darkTab.addEventListener('click', () => switchTab('dark'));
        }
        
        if (lightTab) {
            lightTab.addEventListener('click', () => switchTab('light'));
        }
        
        // Handle color swatch clicks
        document.querySelectorAll('.color-swatch-btn').forEach(swatch => {
            swatch.addEventListener('click', function() {
                const color = this.getAttribute('data-color');
                const mode = this.getAttribute('data-mode');
                
                // Save as default for this mode
                saveModeDefault(color, mode);
                
                // Update selected state (only in current tab)
                const currentTab = document.querySelector('.tabs-trigger[data-state="active"]');
                if (currentTab && currentTab.getAttribute('data-tab') === mode) {
                    document.querySelectorAll(`.color-swatch-btn[data-mode="${mode}"]`).forEach(s => s.classList.remove('selected'));
                    this.classList.add('selected');
                }
                
                // Apply color if we're in the matching mode
                applyTextColor(color, mode);
                
                // Update color input
                const colorInput = document.getElementById('timer-text-color-picker');
                if (colorInput) {
                    colorInput.value = color;
                }
            });
            
            // Keyboard accessibility
            swatch.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });
        
        // Handle native color input
        const colorInput = document.getElementById('timer-text-color-picker');
        if (colorInput) {
            colorInput.addEventListener('input', function(e) {
                const color = e.target.value;
                const isDark = document.documentElement.classList.contains('dark');
                const mode = isDark ? 'dark' : 'light';
                
                // Save as default for current mode
                saveModeDefault(color, mode);
                
                // Apply color
                timerDisplay.style.color = color;
                
                // Remove selected state from swatches when using custom color
                document.querySelectorAll('.color-swatch-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
            });
        }
        
        // Handle default buttons
        const defaultDarkBtn = document.getElementById('defaultDarkBtn');
        if (defaultDarkBtn) {
            defaultDarkBtn.addEventListener('click', resetToDarkDefault);
        }
        
        const defaultLightBtn = document.getElementById('defaultLightBtn');
        if (defaultLightBtn) {
            defaultLightBtn.addEventListener('click', resetToLightDefault);
        }
        
        // Watch for theme changes to update timer color
        const colorThemeObserver = new MutationObserver(function() {
            loadTextColor();
        });
        colorThemeObserver.observe(document.documentElement, {
            attributes: true,
            attributeFilter: ['data-theme']
        });
        
        // Initialize timer text color on load
        loadTextColor();
        
        // Set initial tab based on current mode (without switching theme)
        const isDarkInitial = document.documentElement.getAttribute('data-theme') === 'style1';
        setTabState(isDarkInitial ? 'dark' : 'light', false);
    </script>
    <script>
        // Sheet open/close and clear settings
        function openSheet() {
            document.getElementById('settingsDrawer').classList.add('open');
            document.getElementById('drawerOverlay').classList.add('open');
            document.getElementById('drawerOverlay').setAttribute('aria-hidden', 'false');
            var isDark = document.documentElement.getAttribute('data-theme') === 'style1';
            if (typeof setTabState === 'function') setTabState(isDark ? 'dark' : 'light', false);
        }
        
        function closeSheet() {
            document.getElementById('settingsDrawer').classList.remove('open');
            document.getElementById('drawerOverlay').classList.remove('open');
            document.getElementById('drawerOverlay').setAttribute('aria-hidden', 'true');
        }
        
        function clearClockSettings() {
            if (typeof saveTitle === 'function') saveTitle('');
            if (typeof updateTitle === 'function') updateTitle('');
            if (typeof titleInput !== 'undefined' && titleInput) titleInput.value = '';
            if (typeof saveWorkoutInstructions === 'function') saveWorkoutInstructions('');
            if (typeof updateWorkoutInstructions === 'function') updateWorkoutInstructions('');
            if (typeof workoutInstructionsInput !== 'undefined' && workoutInstructionsInput) workoutInstructionsInput.value = '';
            if (typeof saveModeDefault === 'function') {
                saveModeDefault(DARK_DEFAULT, 'dark');
                saveModeDefault(LIGHT_DEFAULT, 'light');
            }
            document.querySelectorAll('.color-swatch-btn').forEach(function(btn) { btn.classList.remove('selected'); });
            if (typeof loadTextColor === 'function') loadTextColor();
        }
        
        function confirmClearSettings() {
            return confirm('Clear all settings? Clock title, workout instructions, and clock text color will be reset to defaults.');
        }
        
        document.getElementById('timerDisplayBlock').addEventListener('click', openSheet);
        document.getElementById('timerDisplayBlock').addEventListener('keydown', function(e) { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openSheet(); } });
        var clockTitleBlock = document.getElementById('clockTitleBlock');
        if (clockTitleBlock) {
            clockTitleBlock.addEventListener('click', openSheet);
            clockTitleBlock.addEventListener('keydown', function(e) { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openSheet(); } });
        }
        document.getElementById('menuBtn').addEventListener('click', openSheet);
        document.getElementById('drawerOverlay').addEventListener('click', closeSheet);
        document.getElementById('drawerCloseBtn').addEventListener('click', closeSheet);
        
        var headerClearBtn = document.getElementById('headerClearBtn');
        var clearAllSettingsBtn = document.getElementById('clearAllSettingsBtn');
        if (headerClearBtn) headerClearBtn.addEventListener('click', function() { if (confirmClearSettings()) clearClockSettings(); });
        if (clearAllSettingsBtn) clearAllSettingsBtn.addEventListener('click', function() { if (confirmClearSettings()) clearClockSettings(); });
        
        // Theme toggle button (mobile-friendly)
        document.addEventListener('DOMContentLoaded', function() {
            var themeToggleBtn = document.getElementById('themeToggleBtn');
            if (themeToggleBtn) {
                themeToggleBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (window.toggleTheme) window.toggleTheme();
                });
                themeToggleBtn.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (window.toggleTheme) window.toggleTheme();
                }, { passive: false });
            }
        });
        
        function updateLogoColors() {
            var logo = document.getElementById('timerist-logo');
            if (!logo) return;
            var isDark = document.documentElement.getAttribute('data-theme') === 'style1';
            var color = isDark ? '#fafafa' : '#0a0a0a';
            var circles = logo.querySelectorAll('.logo-circle');
            var lines = logo.querySelectorAll('.logo-line');
            circles.forEach(function(el) { el.setAttribute('stroke', color); });
            lines.forEach(function(el) { el.setAttribute('stroke', color); });
        }
        
        function updateThemeIcon() {
            if (window.updateThemeIconHelper) {
                window.updateThemeIconHelper();
            } else {
                var icon = document.getElementById('theme-icon');
                if (!icon) return;
                var isDark = document.documentElement.getAttribute('data-theme') === 'style1';
                icon.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
            }
        }
        
        window.updateThemeIcon = updateThemeIcon;
        
        var themeObserver = new MutationObserver(function() {
            updateLogoColors();
            updateThemeIcon();
            if (typeof loadTextColor === 'function') loadTextColor();
        });
        themeObserver.observe(document.documentElement, {
            attributes: true,
            attributeFilter: ['data-theme']
        });
        
        var originalToggle = window.toggleTheme;
        if (originalToggle) {
            window.toggleTheme = function() {
                originalToggle();
                setTimeout(function() {
                    updateLogoColors();
                    updateThemeIcon();
                }, 10);
            };
        }
        
        updateLogoColors();
        updateThemeIcon();
    </script>
</body>
</html>
